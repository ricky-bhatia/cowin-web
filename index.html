<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Ricky Bhatia">
    <title>CoWIN Vaccine Tracker</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon-16x16.png">
    <link rel="manifest" href="assets/img/site.webmanifest">
    <meta property="og:url" content="https://co-win.herokuapp.com/">
    <meta property="og:title" content="CoWIN Vaccine Tracker">
    <meta property="og:description" content="A clean and simple real-time vaccine tracker and appointment booking scheduler.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://icons.getbootstrap.com/assets/img/bootstrap-icons-social.png">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1000">
    <meta property="og:image:height" content="500">

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/min/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.0.0/crypto-js.min.js"></script>
    
    

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    
    <!-- Custom styles for this template -->
    <link href="form-validation.css" rel="stylesheet">
  </head>
  <body class="bg-light">
    
<div class="container-fluid">
  <main>
    <div class="py-5 text-center">
      <i class="bi bi-patch-plus-fill" style="font-size: 2rem; color: blue;"></i>
      <h2>CoWIN Vaccine Tracker</h2>
      <p class="lead">A clean and simple CoWIN vaccine tracker that shows available vaccine counts in your area. You can also book the appointment directly using the booking scheduler.</p>
    </div>

    <div class="row g-5">

      <div class="col-fluid">
        <h4>Tracker</h4>
        <p><small>Choose the options from below form and click <strong>Start Tracking</strong>. The web page will search for centers every <strong>10</strong> seconds and list the centers with available vaccines.</small></p>
        <form class="needs-validation" novalidate>
          <div class="row g-3">

            <div class="col-md-6">
              <label for="stateList" class="form-label">State</label>
              <select class="form-select" id="stateList" onchange="getDistricts()" required>
              </select>
              <div class="invalid-feedback">
                Please provide a valid state.
              </div>
            </div>
            <div class="col-md-6">
              <label for="districtList" class="form-label">District</label>
              <select class="form-select" id="districtList" required>
              </select>
              <div class="invalid-feedback">
                Please provide a valid district.
              </div>
            </div>
            
            <div class="col-12">
              <label for="pincodeList" class="form-label">Pincodes <span class="text-muted"><small>(Optional. Enter list of pincodes separated by comma)</small></label>
              <input type="text" class="form-control" id="pincodeList" placeholder="" value="">
            </div>
            <div class="col-12">
              <label for="centerNameList" class="form-label">Center Names <span class="text-muted"><small>(Optional. If you are looking for specific centers, then enter name here. You need not enter complete center name, just one main word is sufficient (ensure spelling is correct). You can also enter multiple center names separated by comma. Eg. apollo,reliance)</small></label>
              <input type="text" class="form-control" id="centerNameList" placeholder="" value="">
            </div>
            <div class="col-12">
              <label for="addressList" class="form-label">Place/Location Keywords <span class="text-muted"><small>(Optional. You can enter location keywords to filter centers in that area. These words are searched in <strong>center address</strong>, so ensure that the words are part of the address. Eg. borivali,malad)</small></label>
              <input type="text" class="form-control" id="addressList" placeholder="" value="">
            </div>
            
            <div class="col-md-3">
              <label for="ageList" class="form-label">Age</label>
              <select class="form-select" id="ageList" required>
                <option value="18">18+</option>
                <option value="45">45+</option>
              </select>
              <div class="invalid-feedback">
                Please provide a valid age group.
              </div>
            </div>
            <div class="col-md-3">
              <label for="vaccineList" class="form-label">Vaccine</label>
              <select class="form-select" id="vaccineList" required>
                <option value="ANY" selected>Any</option>
                <option value="COVISHIELD">COVISHIELD</option>
                <option value="COVAXIN">COVAXIN</option>
                <option value="SPUTNIK V">SPUTNIK V</option>
              </select>
            </div>
            <div class="col-md-3">
              <label for="feeList" class="form-label">Fee Type</label>
              <select class="form-select" id="feeList" required>
                <option value="ANY">Any</option>
                <option value="FREE">Free</option>
                <option value="PAID">Paid</option>
              </select>
            </div>
            <div class="col-md-3">
              <label for="doseList" class="form-label">Dose</label>
              <select class="form-select" id="doseList" required>
                <option value="1">Dose 1</option>
                <option value="2">Dose 2</option>
              </select>
            </div>
            
            <div class="d-grid gap-2 col-12 mx-auto">
              <button type="button" id="startTrackingBtn" class="btn btn-primary" onclick="startTracking()">Start Tracking</button>
              <button type="button" id="stopTrackingBtn" class="btn btn-danger d-none" onclick="stopTracking()">Stop Tracking</button>
            </div>
          </div>
        </form>

        <hr class="my-4">
        <form class="needs-validation" novalidate>
            <h4>Booking Scheduler</h4>
            <p><small>This can help you book the vaccination appointment automatically. You'll need to login here, select the beneficiaries, and desired options using the above form. The app will then look for appropriate centers (based on your choice of options above) for upto 15 minutes, and if it finds a suitable center then automatically book an appointment for you. If no center is found in the 15 minute duration, the process will time out and you will need to login again and repeat the steps.</small></p>
            <div class="form-check mb-3">
              <input class="form-check-input" type="checkbox" value="" id="enableBooking">
              <label class="form-check-label" for="enableBooking">Enable Booking Scheduler</label>
            </div>
            <div id="sendOTPdiv" class="input-group mb-3">
              <input type="text" class="form-control" id="mobileNumber" placeholder="Mobile Number" aria-label="Mobile Number" aria-describedby="button-addon1">
              <button class="btn btn-outline-secondary" type="button" onclick="sendOTP()" id="button-addon1">Send OTP</button>
            </div>
            
            <div id="verifyOTPdiv" class="input-group mb-3 d-none">
              <input type="text" class="form-control" id="otp" placeholder="Enter OTP" aria-label="Enter OTP" aria-describedby="button-addon2">
              <button class="btn btn-outline-secondary" type="button" onclick="verifyOTP()" id="button-addon2">Verify OTP</button>
            </div>
            
            <div id="benListdiv" class="mb-3 d-none">
              <label for="beneficiariesList" class="form-label">Beneficiaries <span class="text-muted">(You can select multiple beneficiaries, but ensure they are in same age group)</span></label>
              <select class="form-select" id="beneficiariesList" multiple>
              </select>
              <div class="invalid-feedback">
                Please select at least one beneficiary.
              </div>
            </div>
            
            <div class="d-grid gap-2 col-12 mx-auto">
              <button type="button" id="startBookingBtn" class="btn btn-primary" disabled onclick="startBooking()">Start Booking</button>
              <button type="button" id="stopBookingBtn" class="btn btn-danger d-none" onclick="stopBooking()">Stop Booking</button>
            </div>
        </form>
        <br/>
        <div id="mainAlert" class="alert fade show d-none" role="alert">
        </div>
        <!--<div class="col-md-12">
            <ul class="list-group" id="centersList">
            </ul>
        </div>-->
        <table class="table table-sm">
          <caption>List of centers</caption>
          <thead>
            <tr>
              <th scope="col">Pincode</th>
              <th scope="col">Center</th>
              <th scope="col">Capacity</th>
            </tr>
          </thead>
          <tbody id="centersRows">
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <footer class="my-5 pt-5 text-muted text-center text-small">
    <p class="mb-1">&copy; 2021 Ricky Bhatia</p>
    <div class="btn-group" role="group" aria-label="Basic mixed styles example">
      <button type="button" class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy</button>
      <a role="button" href="https://forms.gle/WJD1ESv3agoYFzEz5" class="btn btn-outline-secondary btn-sm">Feedback</a>
      <button type="button" class="btn btn-secondary btn-sm">Support</button>
    </div>
    <div>
      <a href="https://hits.seeyoufarm.com"><img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fco-win.herokuapp.com&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false"/></a>
    </div>
  </footer>
  <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Privacy</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <h6>Information Collection</h6>
            <p><small>While using this site, none of the data provided by you is actually stored on the server or collected for any other purposes. All communication or information exchange is done directly with CoWIN APIs and requested information is displayed.</small></p>
            <h6>Log Data</h6>
            <p><small>None of user information is being knowingly logged by the code.</small></p>
            <h6>Cookies</h6>
            <p><small>There might be 1 cookie being used purely to keep a count of users visiting the site. This is only there to help me get some stats of usage of the site.</small></p>
          </div>
        </div>
      </div>
    </div>
  </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="form-validation.js"></script>
    <script src="app.js"></script>
    
  </body>

</html>
